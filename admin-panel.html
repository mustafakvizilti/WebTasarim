<!DOCTYPE html>
<html lang="tr">

<head>
<meta charset="UTF-8">
<title>Admin Paneli</title>

<style>
    body {
        font-family: "Segoe UI", sans-serif;
        background: #f5f7fa;
        margin: 0;
        padding: 30px;
    }

    /* NAVBAR */
    .navbar {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
    }

    .navbar a {
        padding: 10px 15px;
        background: #0059ff;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 600;
        transition: 0.2s;
    }

    .navbar a:hover {
        background: #0048d1;
    }

    .top {
        background: linear-gradient(135deg, #0059ff, #4c8bff);
        padding: 20px;
        color: white;
        border-radius: 12px;
        margin-bottom: 30px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    }

    .top h2 {
        margin: 0;
        font-size: 28px;
        letter-spacing: 1px;
    }

    .card {
        background: white;
        padding: 0;
        border-radius: 12px;
        margin-bottom: 25px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .card-header {
        background: #eef3ff;
        padding: 15px 20px;
        font-size: 19px;
        font-weight: 600;
        border-bottom: 1px solid #dfe6ff;
        color: #003d99;
    }

    .card-body {
        padding: 20px;
    }

    textarea, input {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #ccd7ff;
        background: #f8faff;
        font-size: 15px;
        resize: none;
        transition: 0.2s;
    }

    textarea:focus, input:focus {
        border-color: #0059ff;
        box-shadow: 0 0 6px rgba(0, 89, 255, 0.3);
    }

    button {
        padding: 12px 17px;
        background: #0059ff;
        border: none;
        color: white;
        border-radius: 8px;
        cursor: pointer;
        font-size: 15px;
        font-weight: 500;
        transition: 0.2s;
    }

    button:hover {
        background: #0048d1;
    }

    .logout {
        background: #ff3b3b;
        margin-top: 20px;
    }

    .logout:hover {
        background: #d32e2e;
    }

    .message-item, .announcement-item {
        padding: 12px;
        margin-bottom: 10px;
        background: #f0f4ff;
        border: 1px solid #d5defc;
        border-radius: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .delete-btn {
        background: none;
        border: none;
        font-size: 18px;
        cursor: pointer;
        color: #cc0000;
        padding: 5px;
    }

    .delete-btn:hover {
        color: #ff0000;
    }

</style>
</head>

<body>

<div class="top">
    <h2>Admin Paneli</h2>
</div>

<!-- NAVBAR -->
<div class="navbar">
    <a href="dashboard.html">Dashboard</a>
    <a href="orders.html">SipariÅŸler</a>
    <a href="manage.html">ÃœrÃ¼n YÃ¶netimi</a>
</div>

<!-- DUYURU EKLE -->
<div class="card">
    <div class="card-header">Duyuru Ekle</div>
    <div class="card-body">
        <textarea id="announcement" rows="4" placeholder="Yeni duyuruyu buraya yaz..."></textarea>
        <button onclick="addAnnouncement()" style="margin-top:15px;">Duyuruyu Kaydet</button>

        <div id="annList" style="margin-top:20px;"></div>
    </div>
</div>

<!-- MESAJLAR -->
<div class="card">
    <div class="card-header">Gelen Mesajlar</div>
    <div class="card-body">
        <div id="messages"></div>
    </div>
</div>

<button class="logout" onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>

<script>
// GiriÅŸ kontrolÃ¼
if (localStorage.getItem("adminLogged") !== "true") {
    window.location.href = "admin-login.html";
}

// DUYURU EKLEME
function addAnnouncement() {
    let a = document.getElementById("announcement").value;
    if (!a) return alert("BoÅŸ duyuru kaydedilemez.");

    let list = JSON.parse(localStorage.getItem("announcements") || "[]");
    list.push(a);
    localStorage.setItem("announcements", JSON.stringify(list));

    window.dispatchEvent(new Event("announcementUpdated"));

    document.getElementById("announcement").value = "";
    loadAnnouncements();
}

// DUYURULARI LÄ°STELEME
function loadAnnouncements() {
    let list = JSON.parse(localStorage.getItem("announcements") || "[]");
    let area = document.getElementById("annList");
    area.innerHTML = "";

    if (list.length === 0) {
        area.innerHTML = "<p style='color:#777;'>HenÃ¼z duyuru yok.</p>";
        return;
    }

    list.forEach((d, i) => {
        area.innerHTML += `
            <div class="announcement-item">
                <span>${d}</span>
                <button class="delete-btn" onclick="deleteAnnouncement(${i})">ðŸ—‘</button>
            </div>
        `;
    });
}

function deleteAnnouncement(index) {
    let list = JSON.parse(localStorage.getItem("announcements") || "[]");
    list.splice(index, 1);
    localStorage.setItem("announcements", JSON.stringify(list));
    loadAnnouncements();
}

// MESAJLARI GÃ–STER
function loadMessages() {
    let msgs = JSON.parse(localStorage.getItem("messages") || "[]");
    let html = "";

    if (msgs.length === 0) {
        html = "<p style='color:#777;'>HenÃ¼z mesaj yok.</p>";
    }

    msgs.forEach(m => {
        html += `<div class="message-item">${m}</div>`;
    });

    document.getElementById("messages").innerHTML = html;
}

// Ã‡IKIÅž
function logout() {
    localStorage.removeItem("adminLogged");
    window.location.href = "admin-login.html";
}

loadAnnouncements();
loadMessages();

</script>

</body>
</html>
